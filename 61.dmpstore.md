---
description: dmpstore 변수 덤프에서 CRC32 체크섬을 재계산하는 애플리케이션 작성하기
---

# 61.dmpstore 명령을 사용하여 변수를 파일에 저장/로드하기

UEFI 셸에는 UEFI 변수의 내용을 확인하는 데 도움이 되는 dmpstore 명령이 있다.

이 dmpstore 명령의 도움말을 보면 이 명령이 제공하는 유용한 기능을 하나 더 볼 수 있다. 이 명령을 사용하면 UEFI 변수를 파일에 저장하고 해당 파일에서 다시 로드할 수 있다.&#x20;

```
FS0:\> dmpstore -?
...
DMPSTORE [-all | ([variable] [-guid guid])] [-s file]
DMPSTORE [-all | ([variable] [-guid guid])] [-l file]
...
  -s       - Saves variables to a file.
  -l       - Loads and sets variables from a file.
...
```

이 메커니즘을 사용하여 기존 UEFI 변수의 내용을 수정해보자. 이것은 디버그에 유용한 기능이 될 수 있다.

이전 레슨에서는 UEFI 부팅 변수의 내용을 기반으로 부팅 소스를 표시하는 ShowBootVariables.efi 애플리케이션을 만들었었다.

```
FS0:\> ShowBootVariables.efi
Boot0000
UiApp
Fv(7CB8BDC9-F8EB-4F34-AAEA-3EE4AF6516A1)/FvFile(462CAA21-7614-4503-836E-8AB6F4662331)

Boot0001
UEFI QEMU DVD-ROM QM00003
PciRoot(0x0)/Pci(0x1,0x1)/Ata(0x0)

Boot0002*
EFI Internal Shell
Fv(7CB8BDC9-F8EB-4F34-AAEA-3EE4AF6516A1)/FvFile(7C04A583-9E3E-4F1C-AD65-E05268D0B4D1)

Boot0003
UEFI QEMU HARDDISK QM00001
PciRoot(0x0)/Pci(0x1,0x1)/Ata(0x0)
```

이 애플리케이션에서 구문 분석된 변수 중 하나는 `BootOrder` 변수였다.

잊어버린 경우에는 아래의 개념을 보자.

{% code overflow="wrap" %}
```
BootOrder 변수는 Boot####옵션의 정렬된 목록을 구성하는 UINT16의 배열을 포함한다. 배열의 첫 번째 요소는 첫 번째 논리적 부팅 옵션의 값이고 두 번째 요소는 두 번째 논리적 부팅 옵션의 값 등이다. BootOrder 순서 목록은 펌웨어의 부팅 관리자를 기본 부팅 순서로 지정한다.
```
{% endcode %}

`BootOrder` 변수의 내용을 출력해보자.

```
FS0:\> dmpstore BootOrder
Variable NV+RT+BS 'EFIGlobalVariable:BootOrder' DataSize = 0x08
  00000000: 00 00 01 00 02 00 03 00-                         *........*
```

현재 순서는 다음과 같다.

```
Boot0000
Boot0001
Boot0002
Boot0003
```

모든 것이 `ShowBootVariables` 애플리케이션이 보여주는 것과 같다.

